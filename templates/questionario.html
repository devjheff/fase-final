<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Qualifica√ß√£o para Cursos de Tecnologia</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- CSS do projeto -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/questionario.css') }}">
</head>

<body>
  <!-- Perfil no canto superior direito -->
  <div class="user-profile">
    <div class="profile-container" id="loggedInState">
      <div class="profile-icon">
        <i class="fas fa-user"></i>
      </div>
      <div class="profile-info">
        <div class="profile-name">{{ session.usuario_nome }}</div>
        <div class="profile-status">
          <span class="status-dot"></span> Online
        </div>
      </div>
      <a href="{{ url_for('logout') }}" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i> Sair
      </a>
    </div>
  </div>

  <!-- Logo -->
  <a href="/" class="logo">
    <img src="{{ url_for('static', filename='imgs/Senac_logo.png') }}" alt="Logo">
  </a>

  <!-- Conte√∫do Principal -->
  <div class="container questionario-container">
    <!-- Cabe√ßalho -->
    <div class="questionario-header">
      <h1><i class="fas fa-graduation-cap"></i> Sistema de Orienta√ß√£o para Cursos de Tecnologia</h1>
      <p class="subtitle">Identifique o curso mais adequado para voc√™ neste momento da sua jornada</p>
      
      <div class="instructions">
        <div class="instruction-item">
          <i class="fas fa-lightbulb"></i>
          <span>N√£o existem respostas certas ou erradas, apenas sinceras!</span>
        </div>
        <div class="instruction-item">
          <i class="fas fa-heart"></i>
          <span>Este question√°rio √© inclusivo e respeita seu momento atual</span>
        </div>
      </div>
      
      <div class="progress-container">
        <div class="progress-info">
          <span class="progress-text">Progresso: <strong id="progressPercent">0%</strong></span>
          <span class="progress-counter" id="progressCounter">Pergunta 0 de 10</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>
    </div>

    <!-- √Årea da Pergunta -->
    <div class="question-card" id="questionCard">
      <div class="question-number">
        <i class="fas fa-question-circle"></i>
        Pergunta <span id="currentQuestionNumber">1</span> de 10
      </div>
      
      <div class="question-text" id="questionText"></div>
      
      <div class="options-container" id="optionsContainer"></div>
      
      <!-- BOT√ïES DE NAVEGA√á√ÉO -->
      <div class="navigation-buttons">
        <button id="prevBtn" class="nav-btn btn-secondary" disabled>
          <i class="fas fa-arrow-left"></i> Anterior
        </button>
        
        <button id="nextBtn" class="nav-btn btn-primary" disabled>
          Pr√≥xima <i class="fas fa-arrow-right"></i>
        </button>
        
        <button id="submitBtn" class="nav-btn btn-success" style="display: none;">
          <i class="fas fa-check-circle"></i> Ver Resultado
        </button>
      </div>
    </div>

    <!-- Resultado Final -->
    <div class="result-container" id="resultContainer" style="display: none;">
      <div class="result-card">
        <div class="result-header">
          <i class="fas fa-award"></i>
          <h2>Sua Recomenda√ß√£o de Curso</h2>
          <p class="result-subtitle">Baseado nas suas respostas sinceras, esta √© a indica√ß√£o mais adequada para voc√™:</p>
        </div>
        
        <div class="result-content">
          <!-- Curso Recomendado -->
          <div class="recommended-course" id="recommendedCourse">
            <div class="course-icon" id="courseIcon">
              <i class="fas fa-code"></i>
            </div>
            <div class="course-details">
              <h3 id="courseName">Programa√ß√£o Web</h3>
              <p id="courseDescription" class="course-description"></p>
            </div>
          </div>
          
          <!-- Pontua√ß√£o Detalhada -->
          <div class="score-details">
            <h4><i class="fas fa-chart-bar"></i> Pontua√ß√£o por √Årea</h4>
            <div class="score-bars">
              <div class="score-bar">
                <div class="score-label">
                  <i class="fas fa-desktop"></i> Inform√°tica B√°sica
                </div>
                <div class="score-value-container">
                  <div class="score-bar-track">
                    <div class="score-bar-fill" id="scoreInformatica" style="width: 0%; background: #4e54c8;"></div>
                  </div>
                  <span class="score-points" id="pointsInformatica">0</span>
                </div>
              </div>
              
              <div class="score-bar">
                <div class="score-label">
                  <i class="fas fa-code"></i> Programa√ß√£o Web
                </div>
                <div class="score-value-container">
                  <div class="score-bar-track">
                    <div class="score-bar-fill" id="scoreWeb" style="width: 0%; background: #8f94fb;"></div>
                  </div>
                  <span class="score-points" id="pointsWeb">0</span>
                </div>
              </div>
              
              <div class="score-bar">
                <div class="score-label">
                  <i class="fas fa-tools"></i> Manuten√ß√£o de Micros
                </div>
                <div class="score-value-container">
                  <div class="score-bar-track">
                    <div class="score-bar-fill" id="scoreManutencao" style="width: 0%; background: #3498db;"></div>
                  </div>
                  <span class="score-points" id="pointsManutencao">0</span>
                </div>
              </div>
              
              <div class="score-bar">
                <div class="score-label">
                  <i class="fas fa-database"></i> Banco de Dados
                </div>
                <div class="score-value-container">
                  <div class="score-bar-track">
                    <div class="score-bar-fill" id="scoreDados" style="width: 0%; background: #2ecc71;"></div>
                  </div>
                  <span class="score-points" id="pointsDados">0</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Mensagem Personalizada -->
          <div class="personal-message" id="personalMessage">
            <div>
              <h4>üåü Resultado da Orienta√ß√£o</h4>
              <div id="messageText"></div>
            </div>
          </div>
        </div>
        
        <div class="result-actions">
          <button id="restartBtn" class="btnn btn-primary">
            <i class="fas fa-redo"></i> Refazer Question√°rio
          </button>
        </div>
      </div>
    </div>

    <div class="back-container">
      <a href="/" class="btnn linkmenuprincipal">
        <i class="fas fa-arrow-left"></i> Voltar para a tela inicial
      </a>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-bottom">
      <p class="footer-text">
        <center>
          <img src="{{ url_for('static', filename='imgs/logobranca.png') }}" alt="Logo SQW" class="footer-logo">
        </center>
        <br>
        ¬© 2026 Turma 2025.2.235 Programa√ß√£o Web - SENAC ‚Ä¢ Todos os direitos reservados
      </p>
    </div>
  </footer>

  <script>
    // ==================== CONFIGURA√á√ïES DOS CURSOS ====================
    const cursosInfo = {
        informatica: {
            nome: "Inform√°tica B√°sica",
            descricao: "Ideal para quem est√° come√ßando e precisa desenvolver habilidades fundamentais com computadores, internet e ferramentas b√°sicas de produtividade.",
            icone: "fa-desktop",
            cor: "#4e54c8",
            pontosMaximos: 2
        },
        web: {
            nome: "Programa√ß√£o Web",
            descricao: "Para quem tem interesse em criar sites e aplica√ß√µes web, aprender l√≥gica de programa√ß√£o e desenvolver solu√ß√µes digitais.",
            icone: "fa-code",
            cor: "#8f94fb",
            pontosMaximos: 16
        },
        manutencao: {
            nome: "Manuten√ß√£o de Micros",
            descricao: "Perfeito para quem gosta de atividades pr√°ticas, montagem e manuten√ß√£o de hardware, solu√ß√£o de problemas t√©cnicos.",
            icone: "fa-tools",
            cor: "#3498db",
            pontosMaximos: 10
        },
        dados: {
            nome: "Banco de Dados",
            descricao: "Indicado para quem se interessa por organiza√ß√£o de informa√ß√µes, an√°lise de dados e estrutura√ß√£o de sistemas de armazenamento.",
            icone: "fa-database",
            cor: "#2ecc71",
            pontosMaximos: 14
        }
    };

    // ==================== PONTUA√á√ïES M√ÅXIMAS ====================
    const pontuacaoMaxima = {
        informatica: 2,
        web: 16,
        manutencao: 10,
        dados: 14
    };

    // ==================== VARI√ÅVEIS GLOBAIS ====================
    let questions = [];
    let currentQuestionIndex = 0;
    let userAnswers = [];
    let pontuacao = {
        informatica: 0,
        web: 0,
        manutencao: 0,
        dados: 0
    };
    let selectedOption = null;

    // ==================== CARREGAR PERGUNTAS ====================
    async function carregarPerguntas() {
        try {
            const response = await fetch('/api/perguntas');
            if (!response.ok) throw new Error('Erro ao carregar perguntas');
            
            const perguntasDoBanco = await response.json();
            console.log('‚úÖ Perguntas carregadas:', perguntasDoBanco.length);
            
            questions = perguntasDoBanco.map(item => ({
                id: item.n_pergunta,
                question: item.descricao,
                options: item.opcoes
            }));
            
            if (questions.length === 0) {
                alert('Nenhuma pergunta encontrada no banco de dados.');
                return;
            }
            
            document.getElementById('progressCounter').textContent = `Pergunta 0 de ${questions.length}`;
            document.getElementById('currentQuestionNumber').textContent = "1";
            
            loadQuestion(currentQuestionIndex);
            updateProgress();
            
        } catch (error) {
            console.error('‚ùå Erro ao carregar perguntas:', error);
            alert('Erro ao carregar o question√°rio. Por favor, tente novamente.');
        }
    }

    // ==================== CARREGAR PERGUNTA ====================
    function loadQuestion(index) {
        const question = questions[index];
        const questionCard = document.getElementById('questionCard');
        
        questionCard.classList.remove('fade-in');
        
        document.getElementById('currentQuestionNumber').textContent = index + 1;
        document.getElementById('questionText').textContent = question.question;
        
        const optionsContainer = document.getElementById('optionsContainer');
        optionsContainer.innerHTML = '';
        
        question.options.forEach(option => {
            const optionElement = document.createElement('button');
            optionElement.className = 'option-btn';
            optionElement.innerHTML = `
                <span class="option-letter">${option.id}</span>
                <span class="option-text">${option.text}</span>
            `;
            optionElement.dataset.optionId = option.id;
            
            const userAnswer = userAnswers[index];
            if (userAnswer && userAnswer.optionId === option.id) {
                optionElement.classList.add('selected');
            }
            
            optionElement.addEventListener('click', () => selectOption(optionElement, option, index));
            optionsContainer.appendChild(optionElement);
        });
        
        updateNavigationButtons();
        
        setTimeout(() => {
            questionCard.classList.add('fade-in');
        }, 10);
    }

    // ==================== SELECIONAR OP√á√ÉO ====================
    function selectOption(optionElement, option, questionIndex) {
        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.classList.remove('selected');
        });
        
        optionElement.classList.add('selected');
        selectedOption = option;
        
        // REMOVER pontos da resposta anterior
        const respostaAnterior = userAnswers[questionIndex];
        if (respostaAnterior && respostaAnterior.points) {
            const pontosAnteriores = respostaAnterior.points;
            pontuacao.informatica -= pontosAnteriores.informatica || 0;
            pontuacao.web -= pontosAnteriores.web || 0;
            pontuacao.manutencao -= pontosAnteriores.manutencao || 0;
            pontuacao.dados -= pontosAnteriores.dados || 0;
        }
        
        // ADICIONAR novos pontos
        pontuacao.informatica += option.informatica || 0;
        pontuacao.web += option.web || 0;
        pontuacao.manutencao += option.manutencao || 0;
        pontuacao.dados += option.dados || 0;
        
        // REGISTRAR resposta
        userAnswers[questionIndex] = {
            questionId: questions[questionIndex].id,
            optionId: option.id,
            points: {
                informatica: option.informatica || 0,
                web: option.web || 0,
                manutencao: option.manutencao || 0,
                dados: option.dados || 0
            }
        };
        
        console.log('üìä Pontua√ß√£o atual:', pontuacao);
        updateNavigationButtons();
    }

    // ==================== ATUALIZAR BOT√ïES ====================
    function updateNavigationButtons() {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        
        prevBtn.disabled = currentQuestionIndex === 0;
        
        const hasAnswered = userAnswers[currentQuestionIndex] !== undefined;
        
        if (currentQuestionIndex === questions.length - 1 && hasAnswered) {
            nextBtn.style.display = 'none';
            submitBtn.style.display = 'flex';
            submitBtn.disabled = false;
        } else {
            nextBtn.style.display = 'flex';
            submitBtn.style.display = 'none';
            nextBtn.disabled = !hasAnswered;
        }
    }

    // ==================== ATUALIZAR PROGRESSO - CORRIGIDO ====================
    function updateProgress() {
        // CORRE√á√ÉO: calcular baseado em perguntas respondidas √∑ total
        // Usamos currentQuestionIndex + 1 porque o √≠ndice come√ßa em 0
        const questionsAnswered = currentQuestionIndex + 1;
        const progressPercent = (questionsAnswered / questions.length) * 100;
        const progressCounter = `Pergunta ${questionsAnswered} de ${questions.length}`;
        
        document.getElementById('progressPercent').textContent = `${Math.round(progressPercent)}%`;
        document.getElementById('progressCounter').textContent = progressCounter;
        document.getElementById('progressFill').style.width = `${progressPercent}%`;
    }

    // ==================== MOSTRAR RESULTADOS ====================
    async function showResults() {
        // Encontrar curso com maior pontua√ß√£o
        let maxPontos = 0;
        let cursoRecomendado = 'web';
        
        for (const [curso, pontos] of Object.entries(pontuacao)) {
            if (pontos > maxPontos) {
                maxPontos = pontos;
                cursoRecomendado = curso;
            }
        }
        
        const cursoInfo = cursosInfo[cursoRecomendado];
        
        // Atualizar informa√ß√µes do curso recomendado
        document.getElementById('courseName').textContent = cursoInfo.nome;
        document.getElementById('courseDescription').textContent = cursoInfo.descricao;
        document.getElementById('courseIcon').innerHTML = `<i class="fas ${cursoInfo.icone}"></i>`;
        document.querySelector('.recommended-course').style.borderLeftColor = cursoInfo.cor;
        
        // Atualizar pontua√ß√µes
        document.getElementById('pointsInformatica').textContent = pontuacao.informatica;
        document.getElementById('pointsWeb').textContent = pontuacao.web;
        document.getElementById('pointsManutencao').textContent = pontuacao.manutencao;
        document.getElementById('pointsDados').textContent = pontuacao.dados;
        
        // Calcular percentuais para as barras
        const maxScore = Math.max(...Object.values(pontuacao)) || 1;
        
        document.getElementById('scoreInformatica').style.width = `${(pontuacao.informatica / maxScore) * 100}%`;
        document.getElementById('scoreWeb').style.width = `${(pontuacao.web / maxScore) * 100}%`;
        document.getElementById('scoreManutencao').style.width = `${(pontuacao.manutencao / maxScore) * 100}%`;
        document.getElementById('scoreDados').style.width = `${(pontuacao.dados / maxScore) * 100}%`;
        
        // Mensagem personalizada
        const messageText = document.getElementById('messageText');
        
        let mensagem = `
            <div style="background: #ffffff; padding: 20px; border-radius: 15px; border-left: 8px solid ${cursoInfo.cor}; box-shadow: 0 8px 20px rgba(0,0,0,0.1); width: 100%; max-width: 100%; box-sizing: border-box; overflow-x: hidden;">
                
                <!-- T√çTULO -->
                <p style="font-size: 1.3rem; margin-bottom: 20px; color: #1a1a2c; font-weight: 700; border-bottom: 3px solid #e9ecef; padding-bottom: 12px; word-break: break-word;">
                    <i class="fas fa-clipboard-list" style="color: ${cursoInfo.cor};"></i> 
                    Resultado da orienta√ß√£o
                </p>
                
                <!-- PONTUA√á√ïES -->
                <div style="background: #f8fafc; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #e2e8f0; width: 100%; box-sizing: border-box;">
                    <p style="margin: 0 0 15px 0; color: #0f172a; font-weight: 700; font-size: 1.1rem;">
                        <i class="fas fa-chart-bar" style="color: #4e54c8;"></i> 
                        Pontua√ß√£o por √°rea:
                    </p>
                    
                    <div style="display: flex; flex-direction: column; gap: 10px; width: 100%;">
                        <!-- WEB -->
                        <div style="display: flex; flex-direction: column; background: #f1f5f9; padding: 12px; border-radius: 10px; width: 100%; box-sizing: border-box;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="font-size: 1.3rem;">üåê</span>
                                <span style="font-weight: 600; color: #0f172a; font-size: 1rem; flex: 1; word-break: break-word;">Programa√ß√£o Web</span>
                            </div>
                            <div style="display: flex; justify-content: flex-end;">
                                <span style="background: #8f94fb; color: white; font-weight: 700; padding: 5px 15px; border-radius: 50px; font-size: 1rem; display: inline-block;">
                                    ${pontuacao.web} pts
                                </span>
                            </div>
                        </div>
                        
                        <!-- DADOS -->
                        <div style="display: flex; flex-direction: column; background: #f0fdf4; padding: 12px; border-radius: 10px; width: 100%; box-sizing: border-box;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="font-size: 1.3rem;">üóÑÔ∏è</span>
                                <span style="font-weight: 600; color: #0f172a; font-size: 1rem; flex: 1; word-break: break-word;">Banco de Dados</span>
                            </div>
                            <div style="display: flex; justify-content: flex-end;">
                                <span style="background: #2ecc71; color: white; font-weight: 700; padding: 5px 15px; border-radius: 50px; font-size: 1rem; display: inline-block;">
                                    ${pontuacao.dados} pts
                                </span>
                            </div>
                        </div>
                        
                        <!-- MANUTEN√á√ÉO -->
                        <div style="display: flex; flex-direction: column; background: #fff7ed; padding: 12px; border-radius: 10px; width: 100%; box-sizing: border-box;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="font-size: 1.3rem;">üîß</span>
                                <span style="font-weight: 600; color: #0f172a; font-size: 1rem; flex: 1; word-break: break-word;">Manuten√ß√£o de Micros</span>
                            </div>
                            <div style="display: flex; justify-content: flex-end;">
                                <span style="background: #3498db; color: white; font-weight: 700; padding: 5px 15px; border-radius: 50px; font-size: 1rem; display: inline-block;">
                                    ${pontuacao.manutencao} pts
                                </span>
                            </div>
                        </div>
                        
                        <!-- INFORM√ÅTICA -->
                        <div style="display: flex; flex-direction: column; background: #eef2ff; padding: 12px; border-radius: 10px; width: 100%; box-sizing: border-box;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="font-size: 1.3rem;">üíª</span>
                                <span style="font-weight: 600; color: #0f172a; font-size: 1rem; flex: 1; word-break: break-word;">Inform√°tica B√°sica</span>
                            </div>
                            <div style="display: flex; justify-content: flex-end;">
                                <span style="background: #4e54c8; color: white; font-weight: 700; padding: 5px 15px; border-radius: 50px; font-size: 1rem; display: inline-block;">
                                    ${pontuacao.informatica} pts
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- CURSO RECOMENDADO -->
                <div style="background: linear-gradient(135deg, ${cursoInfo.cor}, ${cursoInfo.cor}dd); padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 8px 15px ${cursoInfo.cor}40; width: 100%; box-sizing: border-box;">
                    <div style="display: flex; flex-direction: column; align-items: center; text-align: center; gap: 10px;">
                        <div style="background: rgba(255,255,255,0.2); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px);">
                            <i class="fas ${cursoInfo.icone}" style="font-size: 30px; color: white;"></i>
                        </div>
                        <div style="width: 100%;">
                            <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">Curso Recomendado</p>
                            <p style="margin: 5px 0 0 0; color: white; font-size: 1.5rem; font-weight: 700; word-break: break-word;">${cursoInfo.nome}</p>
                            <p style="margin: 5px 0 0 0; color: white; font-size: 1rem; opacity: 0.95;">
                                ${maxPontos} pontos ‚Ä¢ ${Math.round((maxPontos / cursoInfo.pontosMaximos) * 100)}% afinidade
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- MENSAGEM DE ORIENTA√á√ÉO -->
                <div style="background: #ffffff; padding: 20px; border-radius: 12px; border: 1px solid #e9ecef; width: 100%; box-sizing: border-box;">
                    <div style="display: flex; flex-direction: column; align-items: center; text-align: center; gap: 15px;">
                        <div style="background: ${cursoInfo.cor}15; padding: 12px; border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-smile" style="font-size: 25px; color: ${cursoInfo.cor};"></i>
                        </div>
                        <div style="width: 100%;">
                            <p style="margin: 0 0 8px 0; color: #0f172a; font-size: 1.1rem; font-weight: 600; word-break: break-word;">
                                Essa recomenda√ß√£o considera seu perfil atual e seus interesses.
                            </p>
                            <p style="margin: 0 0 8px 0; color: #334155; font-size: 1rem; word-break: break-word;">
                                <i class="fas fa-rocket" style="color: ${cursoInfo.cor}; margin-right: 5px;"></i>
                                Voc√™ pode evoluir para outros cursos futuramente.
                            </p>
                            <div style="background: ${cursoInfo.cor}10; padding: 12px; border-radius: 10px; margin-top: 10px;">
                                <p style="margin: 0; color: ${cursoInfo.cor}; font-size: 1.1rem; font-weight: 700; text-align: center;">
                                    ‚≠ê Obrigado por participar! üöÄ
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- DICA -->
                <div style="margin-top: 20px; padding: 15px; background: #fff9e6; border-radius: 10px; border-left: 5px solid #f59e0b; width: 100%; box-sizing: border-box;">
                    <div style="display: flex; gap: 12px; align-items: flex-start;">
                        <i class="fas fa-lightbulb" style="font-size: 24px; color: #f59e0b; flex-shrink: 0;"></i>
                        <div style="flex: 1;">
                            <p style="margin: 0; color: #92400e; font-weight: 700; font-size: 1rem;">Dica importante:</p>
                            <p style="margin: 5px 0 0 0; color: #78350f; font-size: 0.95rem; word-break: break-word;">
                                N√£o existem respostas certas ou erradas. O importante √© come√ßar sua jornada na tecnologia!
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        messageText.innerHTML = mensagem;
        
        // Salvar resultado
        try {
            await fetch('/api/salvar-resultado', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    informatica: pontuacao.informatica,
                    web: pontuacao.web,
                    manutencao: pontuacao.manutencao,
                    dados: pontuacao.dados,
                    curso_recomendado: cursoInfo.nome
                })
            });
        } catch (error) {
            console.error('Erro ao salvar resultado:', error);
        }
        
        // Mostrar resultados
        document.getElementById('questionCard').style.display = 'none';
        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('prevBtn').style.display = 'none';
        document.getElementById('submitBtn').style.display = 'none';
        document.getElementById('resultContainer').style.display = 'block';
    }

    // ==================== REINICIAR QUESTION√ÅRIO ====================
    function restartQuestionario() {
        currentQuestionIndex = 0;
        userAnswers = [];
        pontuacao = { informatica: 0, web: 0, manutencao: 0, dados: 0 };
        selectedOption = null;
        
        document.getElementById('questionCard').style.display = 'block';
        document.getElementById('resultContainer').style.display = 'none';
        document.getElementById('nextBtn').style.display = 'flex';
        document.getElementById('prevBtn').style.display = 'flex';
        document.getElementById('submitBtn').style.display = 'none';
        
        loadQuestion(currentQuestionIndex);
        updateProgress();
    }

    // ==================== EVENT LISTENERS ====================
    document.addEventListener('DOMContentLoaded', carregarPerguntas);

    document.getElementById('nextBtn').addEventListener('click', function() {
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            loadQuestion(currentQuestionIndex);
            updateProgress(); // Atualiza o progresso ao avan√ßar
        }
    });

    document.getElementById('prevBtn').addEventListener('click', function() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            loadQuestion(currentQuestionIndex);
            updateProgress(); // Atualiza o progresso ao voltar
        }
    });

    document.getElementById('submitBtn').addEventListener('click', showResults);
    document.getElementById('restartBtn').addEventListener('click', restartQuestionario);

    setTimeout(() => {
        document.querySelector('.questionario-container').classList.add('loaded');
    }, 100);
  </script>
</body>
</html>
