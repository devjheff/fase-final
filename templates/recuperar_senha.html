from flask import Flask, render_template
import psycopg2
from psycopg2.extras import RealDictCursor

app = Flask(__name__)

# CONFIGURAÇÃO DO BANCO
DB_CONFIG = {
    "host": "localhost",
    "database": "seu_banco",
    "user": "seu_usuario",
    "password": "sua_senha",
    "port": 5432
}

def get_connection():
    return psycopg2.connect(**DB_CONFIG)

@app.route("/usuarios")
def listar_usuarios():
    conn = get_connection()
    cursor = conn.cursor(cursor_factory=RealDictCursor)

    query = """
        SELECT 
            id_candidato,
            nome_usuario,
            email_usuario,
            nascimento_usuario,
            senha
        FROM usuario
        ORDER BY id_candidato
    """

    cursor.execute(query)
    usuarios = cursor.fetchall()

    cursor.close()
    conn.close()

    return render_template("usuarios.html", usuarios=usuarios)

if __name__ == "__main__":
    app.run(debug=True)
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro</title>
  <link rel="stylesheet" href="../css/login.css">
</head>
<body>

<a href="/" class="logo">
  <img src="../imgs/logobranca.png" alt="Logo">
</a>

<div class="container">
  <h2>Recupere sua conta</h2>

  <div class="input-group">
    <label>Email</label>
    <input type="email" id="email" placeholder="Digite seu email" required>
  </div>

  <button type="button" onclick="recuperar()">Recuperar</button>

  <p class="switch" id="msg">
    Já tem conta? <a href="login.html">Login</a>
  </p>
</div>

<script>
function recuperar() {
  const email = document.getElementById("email").value;

  fetch("http://localhost:5000/recuperar-senha", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ email })
  })
  .then(response => response.json())
  .then(data => {
    document.getElementById("msg").innerText = data.message;
  })
  .catch(() => {
    document.getElementById("msg").innerText =
      "Erro ao tentar recuperar a senha. Tente novamente.";
  });
}
</script>

</body>
</html>
